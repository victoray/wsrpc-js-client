{"version":3,"sources":["dist/wsrpc.js"],"names":["global","factory","exports","module","define","amd","self","WSRPC","this","_classCallCheck","instance","Constructor","TypeError","Deferred","wrapper","func","done","apply","arguments","console","error","Error","resolve","reject","promise","Promise","isPending","logGroup","group","level","args","groupEnd","log","DEBUG","trace","msg","payload","TRACE","JSON","parse","data","readyState","Object","freeze","0","1","2","3","URL","reconnectTimeout","length","undefined","createSocket","ws","WebSocket","rejectQueue","connectionNumber","callQueue","callObj","shift","deferred","store","id","key","hasOwnProperty","callEvents","evName","event","oneTimeEventStore","i","eventStore","e","stack","tryCallEvent","onclose","err","serial","public","state","setTimeout","socket","exc","reconnect","onerror","onopen","ev","send","stringify","onmessage","message","type","routes","method","then","result","asyncRoutes","badPromise","promiseMock","socketEventsListeners","exception","url","test","window","location","host","concat","scheme","protocol","port","path","replace","getAbsoluteWsUrl","eventId","socketStarted","onconnect","onchange","defer","call","params","push","addRoute","route","callback","isAsync","deleteRoute","addEventListener","removeEventListener","index","onEvent","destroy","close","stateCode","connect","addServerEventListener","callable","removeServerEventListener","splice","sendRaw","argsObj","info"],"mappings":"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"}